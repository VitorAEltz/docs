---
title: Azion `workloads` library
description: >-
  Learn how to use the Azion `workloads` library to manage workloads in edge applications.
permalink: /documentation/products/azion-lib/workloads/
meta_tags: >-
  Azion Lib, edge computing, edge applications, Azion products, workloads
namespace: documentation_azion_lib_workloads
menu_namespace: libMenu
---

import LinkButton from 'azion-webkit/linkbutton'

Azion **Workloads** library provides a simple interface to interact with the **Edge workloads** API, allowing you to create, list, get, update, and delete workloads.

<LinkButton link="/en/documentation/products/azion-lib/overview/" label="Go to Azion Libraries Overview" severity="secondary" />

You can interact with the API using a `client` or calling the methods directly from the library. When making direct calls, you can use the environment variables to configure the `client` without passing the token and debug parameters directly.

This is an example of how a `.env` file with your environment variables may look like:

```sh
AZION_TOKEN=<your-api-token>
AZION_DEBUG=true
```

| Variable | Description |
|----------|-------------|
| `AZION_TOKEN` | Your Azion API token. |
| `AZION_DEBUG` | Enable debug mode (true/false). |

:::tip
Setting `AZION_DEBUG` to `true` enables **Debug mode**. This mode provides detailed logging of the API requests and responses.
:::

If you want to create a specific `client` for interacting with **Workloads**, create one by calling the `createClient` method from the library:

```typescript
import { createClient } from 'azion/workloads';
import type { AzionDomain, AzionDomainsClient } from 'azion/workloads';

const client: AzionDomainsClient = createClient({ token: 'your-api-token', { debug: true } });

const { data: newDomain, error }: AzionDomainsResponse<AzionDomain> = await client.createDomain({ name: 'example domain', edgeApplicationId: 123 });
if (newDomain) {
  console.log(`Domain created with ID: ${newDomain.id}`);
}
```

The `createClient` method has the following **parameters** and **return value**:

**Parameters**:

| Parameter | Type | Description |
|-----------|------|-------------|
| `config` | `Partial<{ token: string; options?: OptionsParams }>` | Configuration options for the Domain client. |

**Returns**:

| Return Type | Description |
|-------------|-------------|
| `AzionDomainsClient` | An object with methods to interact with workloads. |

:::note
In the following examples, the methods are called directly without the creation of a `client`. For more information on how to interact with services and products using a `client`, check the [Azion Lib Client documentation](/en/documentation/products/azion-lib/client/).
:::

---

## Usage

### `createDomain`

This method creates a new domain. For example:

```typescript
import { createDomain } from 'azion/workloads';
import type { AzionDomain, AzionDomainsResponse } from 'azion/workloads';

const { data: domain, error }: AzionDomainsResponse<AzionDomain> = await createDomain({
  name: 'example domain',
  edgeApplicationId: 123,
});
if (domain) {
  console.log(`Domain created with ID: ${domain.id}`);
} else {
  console.error('Failed to create domain', error);
}
```

**Parameters**:

| Parameter | Type | Description |
|-----------|------|-------------|
| `domain` | `AzionCreateDomain` | The domain object containing domain configuration. |
| `options` | `{ debug?: boolean }` | Optional. The object containing a debug flag to enable detailed logging. |

**Returns**:

| Return Type | Description |
|-------------|-------------|
| `Promise<AzionDomainsResponse<AzionDomain>>` | The created domain object or error if failed. |

### `getDomains`

This method lists all workloads. Example:

```typescript
import { getDomains } from 'azion/workloads';
import type { AzionDomainCollection, AzionDomainsResponse } from 'azion/workloads';

const { data: workloads, error }: AzionDomainsResponse<AzionDomainCollection> = await getDomains();

if (workloads) {
  console.log(`Found ${workloads.count} workloads`);
} else {
  console.error('Failed to list workloads', error);
}
```

**Parameters**:

| Parameter | Type | Description |
|-----------|------|-------------|
| `options` | `{ debug?: boolean }` | Optional. The object containing a debug flag to enable detailed logging. |
| `queryParams` | `{ pageSize?: number; page?: number; order?: 'id' \| 'name'; sort?: 'asc' \| 'desc' }` | Optional. Query parameters for pagination and sorting. |

**Returns**:

| Return Type | Description |
|-------------|-------------|
| `Promise<AzionDomainsResponse<AzionDomainCollection>>` | An array of domain objects or error if failed. |

### `getDomain`

Use this method to get a domain by its ID.

```typescript
import { getDomain } from 'azion/workloads';
import type { AzionDomain, AzionDomainsResponse } from 'azion/workloads';

const domainId = 123;
const { data: domain, error }: AzionDomainsResponse<AzionDomain> = await getDomain(domainId);

if (domain) {
  console.log(`Found domain with name: ${domain.name}`);
} else {
  console.error('Failed to get domain', error);
}
```

**Parameters**:

| Parameter | Type | Description |
|-----------|------|-------------|
| `domainId` | `number` | The domain ID. |
| `options` | `{ debug?: boolean }` | Optional. The object containing a debug flag to enable detailed logging. |

### `updateDomain`

This method updates a domain.

```typescript
import { updateDomain } from 'azion/workloads';
import type { AzionDomain, AzionDomainsResponse } from 'azion/workloads';

const domainId = 123;
const { data: domain, error }: AzionDomainsResponse<AzionDomain> = await updateDomain(domainId, {
  name: 'new domain name',
  edgeApplicationId: 456,
});

if (domain) {
  console.log(`Updated domain with name: ${domain.name}`);
} else {
  console.error('Failed to update domain', error);
}
```

**Parameters**:

| Parameter | Type | Description |
|-----------|------|-------------|
| `domainId` | `number` | The domain ID. |
| `domain` | `AzionUpdateDomain` | The domain object to update. |
| `options` | `{ debug?: boolean }` | Optional. The object containing a debug flag to enable detailed logging. |

**Returns**:

| Type | Description |
|------|-------------|
| `Promise<AzionDomainsResponse<AzionDomain>>` | The updated domain object or state failed. |

### `deleteDomain`

This method deletes a domain specified by its ID.

```typescript
import { deleteDomain } from 'azion/workloads';
import type { AzionDomain, AzionDomainsResponse } from 'azion/workloads';

const domainId = 123;
const { data: deletedDomain, error }: AzionDomainsResponse<AzionDomain> = await deleteDomain(domainId);

if (deletedDomain) {
  console.log(`Deleted domain with ID: ${deletedDomain.id}`);
} else {
  console.error('Failed to delete domain', error);
}
```

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `domainId` | `number` | The domain ID. |
| `options` | `{ debug?: boolean }` | Optional. The object containing a debug flag to enable detailed logging. |

**Returns**:

| Type | Description |
|------|-------------|
| `Promise<AzionDomainsResponse<AzionDeletedDomain>>` | The deleted domain id or state failed. |

## Types

If you're using **TypeScript**, you'll need to import and use the appropriate types for the parameters and return values. Here you can see a list of all the types used by the **Workloads** library:

### `AzionDomainsClient`

Configuration options for the Azion workloads client.

| Parameter | Type | Description |
|-----------|------|-------------|
| `token` | `string` | Optional. Your Azion API token. |
| `options` | `OptionsParams` | Optional. Object options params. |
| `debug` | `boolean` | Optional. Enable debug mode for detailed logging. |

### `AzionDomainsResponse<T>`

Generic response type returned by all **Workloads** methods.

| Parameter | Type | Description |
|-----------|------|-------------|
| `data` | `T` | Optional. The response data. |
| `error` | `{ message: string; operation: string; }` | Optional. The error object. |

### `AzionDomain`

Represents a domain configuration with its properties.

| Parameter | Type | Description |
|-----------|------|-------------|
| `state` | `'pending' \| 'executed' \| 'failed'` | The state of the domain. |
| `id` | `number` | Optional. The domain ID. |
| `name` | `string` | The domain name. |
| `url` | `string` | Optional. The domain URL. |
| `environment` | `string` | Optional. The domain environment. |
| `edgeApplicationId` | `number` | The edge application ID. |
| `active` | `boolean` | The domain status. |
| `cnameAccessOnly` | `boolean` | Optional. CNAME access only. |
| `cnames` | `string[]` | List of CNAMEs. |
| `edgeFirewallId` | `number` | Optional. The edge firewall ID. |
| `digitalCertificateId` | `number \| string \| null` | the digital certificate ID. |
| `mtls` | `object \| null` | Optional. Mutual TLS configuration. |
| `mtls.verification` | `string` | Verification method: enforce or permissive. |
| `mtls.trustedCaCertificateId` | `number` | The trusted CA certificate ID. |
| `mtls.crlList` | `number[]` | The list of CRL IDs. |

### `AzionDomainCollection`

Represents a collection of workloads with their current state and pagination details.

| Parameter | Type | Description |
|-----------|------|-------------|
| `state` | `'pending' \| 'executed' \| 'failed'` | The state of the domain list. |
| `pages` | `number` | Number of pages. |
| `count` | `number` | Number of workloads. |
| `results` | `AzionDomain[]` | Array of domain objects. |

### `AzionDeleteDomain`

Represents the parameters required to delete a domain.

| Parameter | Type | Description |
|-----------|------|-------------|
| `id` | `number` | The domain ID. |
| `state` | `'pending' \| 'executed' \| 'failed'` | The state of the domain deletion. |
